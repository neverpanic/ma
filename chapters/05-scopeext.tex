% vim:noet:sts=2:ts=2:sw=2:smarttab:tw=120

\chapter{Design and Implementation of Scope Extension}
	\label{chapter:scopeext}
	Explain what scope extension is, why we think it is a good idea and give a brief overview of how the information
	required can be computed from the results generated by escape analysis.

	\section{Idea}
		\label{sec:scopeext:idea}
		Give an example of the pattern we are trying to achieve in C and compare with a Java implementation that returns
		a freshly allocated object. Observe that we need garbage collection to reclaim this object. Explain how we are
		trying to reduce the need for garbage collection by deducing which objects are no longer needed and can be freed.

	\section{Analysis and Optimization}
		\label{sec:scopeext:analysis}
		Give an overview of the algorithm JINO uses to extend the scope of a variable. Explain how and why it works and why
		we use stack allocation (and make sure to point out that stack allocation isn't the only possible optimization and
		may in fact be not the best). Quote my future work list on what other cool stuff could be done here and also outline
		which problems make this a hard problem.

		\subsection{Handling Nonvirtual Calls}
			\label{sub:scopeext:analysis:nonvirtual}
			Describe what we do for non-virtual calls (those are the easy ones!) and how the optimization applies.

		\subsection{Handling Virtual Calls}
			\label{sub:scopeext:analysis:virtual}
			Explain why virtual method calls are a much harder problem for scope extension and which possibilities can be
			employed to also apply the optimization in these cases (i.e., create a copy that has the optimization enabled, do
			not move the allocation but add explicit \texttt{free(3)}s, or employ some other method of automatic region
			inference).
